@using ChoiceVFileSystemBlazor.Components.Accounts.Pages
@using ChoiceVFileSystemBlazor.Components.Admin.Pages
@using ChoiceVFileSystemBlazor.Components.BankAccounts.Pages
@using ChoiceVFileSystemBlazor.Components.Characters.Pages
@using ChoiceVFileSystemBlazor.Components.Companies.Pages
@using ChoiceVFileSystemBlazor.Components.Groupingfiles.Pages
@using ChoiceVFileSystemBlazor.Components.Supportfiles.Pages
@using ChoiceVFileSystemBlazor.Components.Vehicles.Pages
@using ChoiceVFileSystemBlazor.Components.Supportkeylogs.Pages
@namespace ChoiceVFileSystemBlazor.Components._Layout

<MudNavMenu Style="height: 100%;">
    <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.SpaceDashboard">Dashboard</MudNavLink>
    
    @if (UserAccessService.HasRight(RightEnum.ViewCharactersArea))
    {
        <MudNavLink Href="@LiveCharacterOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.LiveTv">Online Charaktere</MudNavLink>
    }

    @if (UserAccessService.HasRight(RightEnum.ViewSupportfilesArea))
    {
        <MudNavGroup Icon="@Icons.Material.Filled.SupportAgent" Title="Supportakten">
            @if (UserAccessService.HasRight(RightEnum.SupportfileCreate))
            {
                <MudNavLink Icon="@Icons.Material.Filled.Create" Href="@SupportfileCreate.GetRedirectUrl()">Erstellen</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewSupportfiles))
            {
                <MudNavLink Icon="@Icons.Material.Filled.TableView" Href="@SupportfileOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix">Übersicht</MudNavLink>
            }
        </MudNavGroup>
    }

    @if (UserAccessService.HasRight(RightEnum.ViewGroupingfilesArea))
    {
        <MudNavGroup Icon="@Icons.Material.Filled.Groups" Title="Gruppierungsakten">
            @if (UserAccessService.HasRight(RightEnum.GroupingfileCreate))
            {
                <MudNavLink Icon="@Icons.Material.Filled.Create" Href="@GroupingfileCreate.GetRedirectUrl()">Erstellen</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewGroupingfiles))
            {
                <MudNavLink Icon="@Icons.Material.Filled.TableView" Href="@GroupingfileOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix">Übersicht</MudNavLink>
            }
        </MudNavGroup>
    }

    @if (UserAccessService.HasRight(RightEnum.ViewGameserverArea))
    {
        <MudNavGroup Icon="@Icons.Material.Filled.ElectricalServices" Title="Gameserver">
            @if (UserAccessService.HasRight(RightEnum.ViewAccountsArea))
            {
                <MudNavLink Href="@AccountOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountBox">Accountübersicht</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewCharactersArea))
            {
                <MudNavLink Href="@CharacterOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountCircle">Charakterübersicht</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewCompaniesArea))
            {
                <MudNavLink Href="@CompanyOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Business">Unternehmensübersicht</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewBankAccountsArea))
            {
                <MudNavLink Href="@BankAccountOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountBalance">Bankkontenübersicht</MudNavLink>
            }
            <MudNavLink Href="@VehicleOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.DirectionsCar">Fahrzeugübersicht</MudNavLink>
            @if (UserAccessService.HasRight(RightEnum.ViewSupportKeyLogsArea))
            {
                <MudNavLink Href="@SupportkeylogsOverview.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.KeyboardHide">Supporttastenlogs</MudNavLink>
            }
        </MudNavGroup>
    }
    
    @if (UserAccessService.HasRight(RightEnum.ViewAdminPanelArea))
    {
        <MudNavGroup Icon="@Icons.Material.Filled.AdminPanelSettings" Title="Admin">
            @if (UserAccessService.HasRight(RightEnum.ViewAdminAccessControl))
            {
                <MudNavLink Href="@AccessControl.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ViewList">Zugriffverteilung</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewAdminRightsControl))
            {
                <MudNavLink Href="@RightsControl.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Pageview">Rechteverteilung</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewAdminAccessLogs))
            {
                <MudNavLink Href="@AccessLogs.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ScreenSearchDesktop">Accesslogs</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewDiscordRolesControl))
            {
                <MudNavLink Href="@DiscordRolesControl.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Custom.Brands.Discord">Discordrollen</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewNewsControl))
            {
                <MudNavLink Href="@NewsControl.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Newspaper">News</MudNavLink>
            }
            @if (UserAccessService.HasRight(RightEnum.ViewFileCategoryControl))
            {
                <MudNavLink Href="@SupportfileCategoryControl.GetRedirectUrl()" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Category">Supportaktenkategorien</MudNavLink>
            }
        </MudNavGroup>
    }

    <MudNavLink Href="https://github.com/Rezondes" Icon="@Icons.Custom.Brands.GitHub" Style="position: absolute; bottom: 5px;">Created by Rezondes</MudNavLink>
</MudNavMenu>

@code {
    [CascadingParameter] public UserAccessService UserAccessService { get; set; }

    public void Reload()
    {
        StateHasChanged();
    }
}